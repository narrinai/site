<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact Us - Narrin AI Support</title>
  <meta name="description" content="Get in touch with Narrin AI support team. Questions about AI companions, subscriptions, or technical issues? We're here to help.">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://narrin.ai/contact">
  <meta property="og:title" content="Contact Us - Narrin AI Support">
  <meta property="og:description" content="Get in touch with Narrin AI support team. Questions about AI companions, subscriptions, or technical issues? We're here to help.">
  <meta property="og:image" content="https://narrin.ai/og-image.jpg">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://narrin.ai/contact">
  <meta property="twitter:title" content="Contact Us - Support & Help | Narrin AI">
  <meta property="twitter:description" content="Contact Narrin AI for support with AI character chat. Get help, report issues, request features or join our community. We respond within 24 hours.">
  <meta property="twitter:image" content="https://narrin.ai/og-image.jpg">
  
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Microsoft Clarity Analytics -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "svaxez2fed");
  </script>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

  <!-- Import Modern Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    /* ===== CSS CUSTOM PROPERTIES ===== */
    :root {
      /* Primary Colors */
      --color-white: #ffffff;
      --color-off-white: #fafafa;
      --color-light-gray: #f5f5f5;
      
      /* Accent Colors */
      --color-teal: #14b8a6;
      --color-teal-light: #5eead4;
      --color-teal-dark: #0f766e;
      --color-teal-alt: #10a394;
      --color-coral: #f97316;
      --color-coral-light: #fb923c;
      --color-coral-dark: #ea580c;
      
      /* Supporting Colors */
      --color-navy: #1e293b;
      --color-navy-light: #334155;
      --color-gray: #64748b;
      --color-gray-light: #94a3b8;
      --color-gray-dark: #475569;
      
      /* Gradients */
      --gradient-primary: linear-gradient(135deg, var(--color-teal) 0%, var(--color-coral) 100%);
      --gradient-subtle: linear-gradient(135deg, var(--color-teal-light) 0%, var(--color-coral-light) 100%);
      --gradient-tags: linear-gradient(135deg, var(--color-teal-alt) 0%, var(--color-coral) 100%);
      
      /* Shadows */
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-colored: 0 10px 25px -5px rgba(20, 184, 166, 0.2);
      
      /* Spacing */
      --spacing-xs: 0.5rem;
      --spacing-sm: 0.75rem;
      --spacing-md: 1rem;
      --spacing-lg: 1.5rem;
      --spacing-xl: 2rem;
      --spacing-2xl: 3rem;
      --spacing-3xl: 4rem;
      
      /* Typography */
      --font-primary: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-secondary: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
      
      /* Font Sizes */
      --font-size-xs: 0.75rem;
      --font-size-sm: 0.875rem;
      --font-size-base: 1rem;
      --font-size-lg: 1.125rem;
      --font-size-xl: 1.25rem;
      --font-size-2xl: 1.5rem;
      --font-size-3xl: 1.875rem;
      --font-size-4xl: 2.25rem;
      
      /* Border Radius */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Transitions */
      --transition-fast: 150ms ease-out;
      --transition-base: 300ms ease-out;
      --transition-slow: 500ms ease-out;
      
      /* Touch Target Size */
      --touch-target: 44px;
      
      /* Z-index Scale */
      --z-dropdown: 100;
      --z-sticky: 200;
      --z-overlay: 300;
      --z-modal: 400;
      --z-menu-overlay: 500;
    }

    /* ===== RESET & BASE STYLES ===== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      overflow-x: hidden;
    }

    body {
      font-family: var(--font-primary);
      background: var(--color-off-white);
      color: var(--color-navy);
      line-height: 1.6;
      font-size: var(--font-size-base);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      width: 100%;
    }

    /* ===== ACCESSIBILITY ===== */
    :focus {
      outline: 2px solid var(--color-teal);
      outline-offset: 2px;
    }

    :focus:not(:focus-visible) {
      outline: none;
    }

    /* ===== HEADER NAVIGATION ===== */
    .header {
      position: sticky;
      top: 0;
      z-index: var(--z-sticky);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      transition: all var(--transition-base);
    }

    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-lg);
      width: 100%;
      overflow: hidden;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: 72px;
      gap: var(--spacing-lg);
      width: 100%;
    }

    /* Logo */
    .logo {
      font-family: var(--font-secondary);
      font-size: var(--font-size-xl);
      font-weight: 800;
      text-decoration: none;
      letter-spacing: -0.02em;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      transition: transform var(--transition-base);
      flex-shrink: 0;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    /* Desktop Navigation Center */
    .nav-center {
      display: none;
      align-items: center;
      gap: var(--spacing-lg);
      flex: 1;
      justify-content: center;
      position: relative;
    }

    /* Remove USP styling - no longer needed */

    .nav-search {
      position: relative;
      width: 100%;
      max-width: 700px;
      margin-left: var(--spacing-xl);
    }

    .nav-search-input {
      width: 100%;
      padding: var(--spacing-sm) var(--spacing-lg);
      padding-right: calc(var(--spacing-lg) * 2.5);
      font-size: var(--font-size-sm);
      font-family: inherit;
      border: 2px solid var(--color-light-gray);
      border-radius: var(--radius-full);
      background: var(--color-white);
      color: var(--color-navy);
      transition: all var(--transition-base);
    }

    .nav-search-input:hover {
      border-color: var(--color-gray-light);
    }

    .nav-search-input:focus {
      border-color: var(--color-teal);
      box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
    }

    .nav-search-input::placeholder {
      color: var(--color-gray-light);
    }

    .search-submit {
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--gradient-primary);
      border: none;
      border-radius: var(--radius-full);
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .search-submit:hover {
      transform: translateY(-50%) scale(1.1);
    }

    .search-submit svg {
      width: 18px;
      height: 18px;
      color: var(--color-white);
    }

    /* Navigation Links - Desktop */
    .nav-links {
      display: none;
      align-items: center;
      gap: var(--spacing-xl);
    }

    .nav-link {
      color: var(--color-navy);
      text-decoration: none;
      font-weight: 500;
      font-size: var(--font-size-sm);
      transition: color var(--transition-base);
      position: relative;
      padding: var(--spacing-xs) 0;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--gradient-primary);
      transition: width var(--transition-base);
    }

    .nav-link:hover {
      color: var(--color-teal);
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .nav-link.active {
      color: var(--color-teal);
    }

    .nav-link.active::after {
      width: 100%;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--spacing-sm) var(--spacing-lg);
      font-size: var(--font-size-sm);
      font-weight: 600;
      text-decoration: none;
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-base);
      min-height: var(--touch-target);
      white-space: nowrap;
    }

    .btn-primary {
      background: var(--gradient-primary);
      color: var(--color-white);
      box-shadow: var(--shadow-colored);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    /* Mobile Navigation Container */
    .mobile-nav-container {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      flex-shrink: 0;
    }

    /* Mobile Chat Button */
    .mobile-chat-btn {
      display: none;
      align-items: center;
      justify-content: center;
      width: var(--touch-target);
      height: var(--touch-target);
      background: transparent;
      border: none;
      cursor: pointer;
      color: var(--color-navy);
      transition: all var(--transition-base);
      border-radius: var(--radius-md);
      flex-shrink: 0;
      text-decoration: none;
    }

    .mobile-chat-btn:hover {
      background: var(--color-light-gray);
    }

    .mobile-chat-btn svg {
      width: 24px;
      height: 24px;
    }

    /* Mobile Search Button */
    .mobile-search-btn {
      display: none;
      align-items: center;
      justify-content: center;
      width: var(--touch-target);
      height: var(--touch-target);
      background: transparent;
      border: none;
      cursor: pointer;
      color: var(--color-navy);
      transition: all var(--transition-base);
      border-radius: var(--radius-md);
      flex-shrink: 0;
    }

    .mobile-search-btn:hover {
      background: var(--color-light-gray);
    }

    .mobile-search-btn svg {
      width: 24px;
      height: 24px;
    }

    /* Mobile Hamburger Menu */
    .mobile-menu-btn {
      display: none;
      align-items: center;
      justify-content: center;
      width: var(--touch-target);
      height: var(--touch-target);
      background: transparent;
      border: none;
      cursor: pointer;
      color: var(--color-navy);
      transition: all var(--transition-base);
      border-radius: var(--radius-md);
      position: relative;
      flex-shrink: 0;
      z-index: var(--z-menu-overlay);
    }

    .mobile-menu-btn:hover {
      background: var(--color-light-gray);
    }

    .hamburger {
      width: 24px;
      height: 18px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .hamburger span {
      display: block;
      height: 2px;
      width: 100%;
      background: var(--color-navy);
      border-radius: 1px;
      transition: all var(--transition-base);
    }

    .mobile-menu-btn.active .hamburger span:nth-child(1) {
      transform: rotate(45deg) translate(6px, 6px);
    }

    .mobile-menu-btn.active .hamburger span:nth-child(2) {
      opacity: 0;
    }

    .mobile-menu-btn.active .hamburger span:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }

    /* Mobile Menu Overlay - Full Screen */
    .mobile-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(30, 41, 59, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: var(--z-overlay);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-base);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mobile-menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .mobile-menu-content {
      background: var(--color-white);
      border-radius: var(--radius-xl);
      padding: var(--spacing-3xl) var(--spacing-xl);
      box-shadow: var(--shadow-xl);
      max-width: 90vw;
      width: 100%;
      max-width: 400px;
      transform: scale(0.9) translateY(20px);
      transition: all var(--transition-base);
    }

    .mobile-menu-overlay.active .mobile-menu-content {
      transform: scale(1) translateY(0);
    }

    .mobile-menu-header {
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .mobile-menu-logo {
      font-family: var(--font-secondary);
      font-size: var(--font-size-2xl);
      font-weight: 800;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: var(--spacing-sm);
    }

    .mobile-menu-subtitle {
      color: var(--color-gray);
      font-size: var(--font-size-sm);
    }

    .mobile-menu-nav {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
    }

    .mobile-menu-link {
      display: flex;
      align-items: center;
      padding: var(--spacing-md) var(--spacing-lg);
      color: var(--color-navy);
      text-decoration: none;
      font-weight: 500;
      font-size: var(--font-size-base);
      transition: all var(--transition-base);
      border-radius: var(--radius-md);
      background: var(--color-off-white);
    }

    .mobile-menu-link:hover {
      background: var(--color-light-gray);
      color: var(--color-teal);
      transform: translateX(4px);
    }

    .mobile-menu-link.btn-primary {
      background: var(--gradient-primary);
      color: var(--color-white);
      justify-content: center;
      font-weight: 700;
      margin-top: var(--spacing-lg);
    }

    .mobile-menu-link.btn-primary:hover {
      background: var(--gradient-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .mobile-menu-link-icon {
      margin-right: var(--spacing-sm);
      font-size: var(--font-size-lg);
    }

    /* Mobile Search Overlay */
    .mobile-search-overlay {
      position: fixed;
      top: 72px;
      left: 0;
      right: 0;
      background: var(--color-white);
      padding: var(--spacing-lg);
      box-shadow: var(--shadow-lg);
      transform: translateY(-100%);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-base);
      z-index: var(--z-dropdown);
    }

    .mobile-search-overlay.active {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    .mobile-search-form {
      display: flex;
      gap: var(--spacing-sm);
    }

    .mobile-search-input {
      flex: 1;
      padding: var(--spacing-md);
      font-size: var(--font-size-base);
      font-family: inherit;
      border: 2px solid var(--color-light-gray);
      border-radius: var(--radius-md);
      background: var(--color-white);
      color: var(--color-navy);
      transition: all var(--transition-base);
    }

    .mobile-search-input:focus {
      border-color: var(--color-teal);
      box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
    }

    /* Desktop Styles */
    @media (min-width: 769px) {
      .nav-center {
        display: flex;
      }

      .nav-links {
        display: flex;
      }

      .mobile-nav-container {
        display: none !important;
      }

      .mobile-chat-btn {
        display: none !important;
      }

      .mobile-search-btn {
        display: none !important;
      }

      .mobile-menu-btn {
        display: none !important;
      }

      .mobile-menu-overlay {
        display: none !important;
      }
    }

    /* Mobile Styles */
    @media (max-width: 768px) {
      .header-container {
        padding: 0 var(--spacing-md);
      }

      .header-content {
        min-height: 60px;
        gap: var(--spacing-sm);
        padding: 0;
        display: grid;
        grid-template-columns: auto 1fr auto auto auto;
        align-items: center;
      }

      .logo {
        font-size: var(--font-size-lg);
        flex-shrink: 0;
        min-width: fit-content;
        grid-column: 1;
      }

      .mobile-nav-container {
        flex-shrink: 0;
        min-width: fit-content;
        display: flex !important;
        gap: var(--spacing-xs);
        grid-column: 3 / 6;
        justify-self: end;
      }

      .mobile-chat-btn {
        display: flex;
        flex-shrink: 0;
      }

      .nav-center {
        display: none !important;
      }

      .nav-links {
        display: none !important;
      }

      .mobile-chat-btn {
        display: flex;
        flex-shrink: 0;
      }

      .mobile-search-btn {
        display: flex;
        flex-shrink: 0;
      }

      .mobile-menu-btn {
        display: flex;
        flex-shrink: 0;
      }

      .mobile-search-overlay {
        top: 60px;
      }
    }

    /* Extra small mobile devices */
    @media (max-width: 480px) {
      .header-content {
        gap: var(--spacing-xs);
      }
      
      .logo {
        font-size: var(--font-size-base);
      }
    }

    /* ===== MAIN CONTENT STYLES ===== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--spacing-xl);
      position: relative;
    }

    /* Modern Background with Subtle Pattern */
    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 300px;
      background: linear-gradient(135deg, 
        rgba(20, 184, 166, 0.03) 0%, 
        rgba(249, 115, 22, 0.02) 50%, 
        rgba(20, 184, 166, 0.01) 100%);
      border-radius: var(--radius-xl);
      z-index: -1;
      opacity: 0.8;
    }

    .page-header {
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .page-header h1 {
      font-family: var(--font-secondary);
      font-size: var(--font-size-4xl);
      margin: 0 0 var(--spacing-md) 0;
      color: var(--color-navy);
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .page-header p {
      color: var(--color-gray);
      font-size: var(--font-size-lg);
      margin: 0;
      font-weight: 400;
    }

    /* ===== CONTACT CONTENT ===== */
    .contact-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-xl);
      margin-bottom: var(--spacing-3xl);
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Built with passion block - top styling */
    .passion-block {
      background: linear-gradient(135deg, 
        var(--color-teal) 0%, 
        var(--color-coral) 100%);
      border-radius: var(--radius-xl);
      padding: var(--spacing-2xl);
      margin: 0 auto var(--spacing-2xl) auto;
      max-width: 600px;
      color: var(--color-white);
      text-align: center;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
    }

    .passion-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        transparent 50%, 
        rgba(255, 255, 255, 0.1) 100%);
      z-index: 1;
    }

    .passion-block-content {
      position: relative;
      z-index: 2;
    }

    .passion-block h3 {
      font-family: var(--font-secondary);
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--spacing-sm);
      color: var(--color-white);
    }

    .passion-block p {
      font-size: var(--font-size-lg);
      line-height: 1.6;
      margin: 0;
      color: rgba(255, 255, 255, 0.95);
    }

    /* Contact Info Cards */
    .contact-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-xl);
      width: 100%;
      max-width: 800px;
    }

    .info-card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.95) 0%, 
        rgba(248, 250, 252, 0.9) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-xl);
      padding: var(--spacing-2xl);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 4px 20px rgba(0, 0, 0, 0.08),
        0 1px 3px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.6);
    }

    .info-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.05) 100%);
      border-radius: var(--radius-xl);
      z-index: 1;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .info-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 25px 50px rgba(20, 184, 166, 0.15),
        0 12px 25px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }

    .info-card:hover::before {
      opacity: 1;
    }

    .info-card-content {
      position: relative;
      z-index: 2;
    }

    .info-card-icon {
      width: 60px;
      height: 60px;
      background: var(--gradient-primary);
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--spacing-lg);
      font-size: var(--font-size-2xl);
      color: var(--color-white);
      box-shadow: var(--shadow-colored);
      transition: all 0.4s ease;
    }

    .info-card:hover .info-card-icon {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 0 15px 30px rgba(20, 184, 166, 0.3);
    }

    .info-card h3 {
      font-family: var(--font-secondary);
      font-size: var(--font-size-xl);
      font-weight: 700;
      color: var(--color-navy);
      margin-bottom: var(--spacing-sm);
      letter-spacing: -0.02em;
    }

    .info-card p {
      color: var(--color-gray);
      font-size: var(--font-size-base);
      line-height: 1.6;
      margin-bottom: var(--spacing-lg);
    }

    .info-card-link {
      color: var(--color-teal);
      text-decoration: none;
      font-weight: 600;
      font-size: var(--font-size-lg);
      transition: all var(--transition-base);
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    .info-card-link:hover {
      color: var(--color-coral);
      transform: translateX(4px);
    }

    /* FAQ Section */
    .faq-section {
      margin-top: var(--spacing-3xl);
      padding-top: var(--spacing-3xl);
      border-top: 1px solid var(--color-light-gray);
    }

    .faq-header {
      text-align: center;
      margin-bottom: var(--spacing-2xl);
    }

    .faq-header h2 {
      font-family: var(--font-secondary);
      font-size: var(--font-size-3xl);
      font-weight: 700;
      color: var(--color-navy);
      margin-bottom: var(--spacing-sm);
      letter-spacing: -0.02em;
    }

    .faq-header p {
      color: var(--color-gray);
      font-size: var(--font-size-lg);
    }

    .faq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-xl);
    }

    .faq-item {
      background: linear-gradient(145deg,
        rgba(255, 255, 255, 0.95) 0%,
        rgba(248, 250, 252, 0.9) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--spacing-xl);
      transition: all 0.4s ease;
      box-shadow: var(--shadow-sm);
    }

    .faq-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .faq-question {
      font-family: var(--font-secondary);
      font-size: var(--font-size-lg);
      font-weight: 600;
      color: var(--color-navy);
      margin-bottom: var(--spacing-sm);
    }

    .faq-answer {
      color: var(--color-gray);
      line-height: 1.6;
    }

    /* Footer Styles */
    .footer {
      background: var(--color-white);
      border-top: 1px solid var(--color-light-gray);
      padding: var(--spacing-xl) 0;
      margin-top: var(--spacing-3xl);
    }
    .footer-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 var(--spacing-lg);
      text-align: center;
    }
    .footer-links {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-lg);
      margin-bottom: var(--spacing-md);
      flex-wrap: wrap;
    }
    .footer-link {
      color: var(--color-gray);
      text-decoration: none;
      font-size: var(--font-size-sm);
      font-weight: 500;
      transition: color var(--transition-base);
    }
    .footer-link:hover {
      color: var(--color-teal);
    }
    .footer-separator {
      color: var(--color-gray-light);
      font-size: var(--font-size-sm);
    }
    .footer-copyright {
      color: var(--color-gray-light);
      font-size: var(--font-size-xs);
      margin: 0;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .container {
        padding: var(--spacing-md);
      }

      .contact-content {
        gap: var(--spacing-lg);
      }

      .page-header h1 {
        font-size: var(--font-size-3xl);
      }

      .contact-info {
        grid-template-columns: 1fr;
      }

      .passion-block {
        padding: var(--spacing-xl);
      }

      .passion-block h3 {
        font-size: var(--font-size-xl);
      }

      .passion-block p {
        font-size: var(--font-size-base);
      }

      .info-card {
        padding: var(--spacing-lg);
      }

      .faq-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-lg);
      }

      /* Mobile footer adjustments */
      .footer {
        padding: var(--spacing-lg) 0;
        margin-top: var(--spacing-2xl);
      }
      .footer-content {
        padding: 0 var(--spacing-md);
      }
      .footer-links {
        flex-direction: column;
        gap: var(--spacing-md);
      }
      .footer-separator {
        display: none !important;
      }
    }

    /* Hide the name field in Netlify Identity widget */
    .netlify-identity-widget input[name="name"],
    .netlify-identity-widget input[placeholder="Optional"],
    .netlify-identity-widget .formGroup:first-child {
      display: none !important;
    }
      /* Netlify Identity Widget Styling */
    .netlify-identity-widget,
    .netlify-identity-widget *,
    .netlify-identity-widget iframe {
      z-index: 999999999 !important;
    }
    
    /* Add "by signing up" disclaimer to signup form */
    .netlify-identity-widget .form[data-goatcounter-click="signup"]::after,
    .netlify-identity-widget .form.signup::after,
    .netlify-identity-widget .signUp::after {
      content: "By signing up, you agree to our Terms and Conditions and Privacy Policy.";
      display: block;
      font-size: 12px;
      color: #666;
      margin-top: 12px;
      text-align: center;
      line-height: 1.4;
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D6T01M6XTJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D6T01M6XTJ');
  </script>
  <!-- Global Upgrade Popups -->
  <!-- DISABLED: <script src="js/upgrade-popups.js"></script> -->
</head>
<body>
  <!-- Header Navigation -->
  <header class="header">
    <div class="header-container">
      <div class="header-content">
        <!-- Logo -->
        <a href="/" class="logo">Narrin AI</a>

        <!-- Desktop Navigation Center -->
        <div class="nav-center">
          <!-- USPs - Random Display -->
          <div class="nav-usps" aria-label="Key features">
            <div class="usp-item" data-usp="voice" style="display: none;">
              <span class="usp-icon" aria-hidden="true">▶️</span>
              <span>Voice Chat</span>
            </div>
            <div class="usp-item" data-usp="memory" style="display: none;">
              <span class="usp-icon" aria-hidden="true">🧠</span>
              <span>Character Memory</span>
            </div>
            <div class="usp-item" data-usp="private" style="display: none;">
              <span class="usp-icon" aria-hidden="true">🔐</span>
              <span>Private Data</span>
            </div>
          </div>

        </div>

        <!-- Desktop Navigation Links -->
        <nav class="nav-links" role="navigation" aria-label="Secondary navigation">
          <a href="/pricing" class="nav-link">Plans</a>
          <a href="/chat-overview" class="nav-link">My Companions</a>
          <a href="/memory-import" class="nav-link">Import Memory</a>
          <a href="#" class="nav-link" id="loginBtn">Login/Register</a>
          <a href="/create-character" class="btn btn-primary">✨ Create Companion</a>
        </nav>

        <!-- Mobile Navigation Container -->
        <div class="mobile-nav-container">
          <!-- Mobile Chat Button -->
          <a
            href="/chat-overview"
            class="mobile-chat-btn"
            aria-label="Go to chats"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
          </a>

          <button 
            class="mobile-search-btn" 
            id="mobileSearchBtn"
            aria-label="Open search"
            aria-expanded="false"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
          </button>

          <!-- Mobile Hamburger Menu -->
          <button
            class="mobile-menu-btn"
            id="mobileMenuBtn"
            aria-label="Open navigation menu"
            aria-expanded="false"
          >
            <div class="hamburger">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Search Overlay -->
    <div class="mobile-search-overlay" id="mobileSearchOverlay">
      <form class="mobile-search-form">
        <input
          type="text"
          class="mobile-search-input"
          placeholder="Search companions..."
          aria-label="Search companions"
        >
        <button type="submit" class="btn btn-primary">Search</button>
      </form>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay">
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <div class="mobile-menu-logo">Narrin AI</div>
        <div class="mobile-menu-subtitle">AI Companion Platform</div>
      </div>
      <nav class="mobile-menu-nav" role="navigation" aria-label="Mobile navigation">
        <a href="/chat-overview" class="mobile-menu-link">
          <span class="mobile-menu-link-icon">💬</span>
          My Companions
        </a>
        <a href="/pricing" class="mobile-menu-link">
          <span class="mobile-menu-link-icon">💎</span>
          Plans
        </a>
        <a href="/memory-import" class="mobile-menu-link">
          <span class="mobile-menu-link-icon">🧠</span>
          Import Memory
        </a>
        <a href="#" class="mobile-menu-link" id="mobileLoginBtn">
          <span class="mobile-menu-link-icon">👤</span>
          Login/Register
        </a>
        <a href="/create-character" class="mobile-menu-link btn-primary">
          <span class="mobile-menu-link-icon">✨</span>
          Create Companion
        </a>
      </nav>
    </div>
  </div>

  <!-- Main Content -->
  <main class="container">
    <!-- Page Header -->
    <div class="page-header">
      <h1>Built with Passion</h1>
      <p>Get in touch with me if you have any questions or need support.</p>
    </div>

    <!-- Built with Passion - Top Block -->
    <div class="passion-block">
      <div class="passion-block-content">
        <p>Built with passion by a solo developer who believes AI companions can truly help organize your daily thoughts and provide meaningful reflection</p>
      </div>
    </div>

    <!-- Contact Content -->
    <div class="contact-content">
      <!-- Contact Information -->
      <div class="contact-info">
        <!-- Email Card -->
        <div class="info-card">
          <div class="info-card-content">
            <div class="info-card-icon">📧</div>
            <h3>Email Support</h3>
            <p>Send us an email and we'll get back to you within 24 hours. Perfect for detailed questions or technical support.</p>
            <a href="mailto:info@narrin.ai" class="info-card-link">
              info@narrin.ai
              <span>→</span>
            </a>
          </div>
        </div>

        <!-- Community Card -->
        <div class="info-card">
          <div class="info-card-content">
            <div class="info-card-icon">👥</div>
            <h3>Community</h3>
            <p>Join our Reddit community to connect with other users, share tips, and get community support.</p>
            <a href="https://www.reddit.com/r/NarrinAI/" target="_blank" rel="noopener noreferrer" class="info-card-link">
              Join Reddit
              <span>→</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="faq-section">
      <div class="faq-header">
        <h2>Frequently Asked Questions</h2>
        <p>Find quick answers to common questions about Narrin AI</p>
      </div>
      
      <div class="faq-grid">
        <div class="faq-item">
          <h3 class="faq-question">How do I create a custom AI companion?</h3>
          <p class="faq-answer">You can create your own AI companion by clicking "Create Companion" and customizing their personality, background, voice, interests, and conversation style. Our advanced system allows you to craft unique companions with distinct traits and knowledge areas.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What makes Narrin AI different from other AI platforms?</h3>
          <p class="faq-answer">Narrin AI focuses on daily reflection and thought organization. Our companions help you process scattered thoughts into clear insights, with memory systems that remember your personal details, goals, and preferences for truly personalized conversations.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Can I use Narrin AI for free?</h3>
          <p class="faq-answer">Yes! The Discover plan gives you 5 free chat messages to start exploring our AI companions. Once you've used your initial messages, you can upgrade to our Engage or Immerse plans for continued access with additional features.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How does companion memory work?</h3>
          <p class="faq-answer">Each companion has an intelligent memory system that remembers important details from your conversations, including your preferences, shared stories, and emotional moments. This creates continuity across chats, making each interaction feel natural and connected to your history together.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Are voice features available?</h3>
          <p class="faq-answer">Yes! Text-to-speech (TTS) and speech-to-text (STT) features are available in our paid plans (Engage and Immerse). You can have natural voice conversations with your companions, making interactions even more immersive and lifelike.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How deeply can I customize my companions?</h3>
          <p class="faq-answer">Our platform offers extensive customization options. Beyond basic traits, you can define your companion's communication style, emotional responses, interests, expertise areas, backstory details, and even specific mannerisms. Premium plans unlock advanced customization for truly unique companions.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What's the difference between the plans?</h3>
          <p class="faq-answer">Discover (Free): 5 messages, 1 companion, voice input (no signup required). Engage ($4.99 - Limited Time, was $8.99): 3 companions, unlimited text chats, 25 voice interactions, extensive memory and customization. Immerse ($11.99 - Limited Time, was $14.99): Everything unlimited plus early access to new features and priority support.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How do companions maintain context?</h3>
          <p class="faq-answer">Our advanced AI maintains context through sophisticated memory layers. Short-term memory handles current conversations, while long-term memory stores important relationship details, creating companions that truly understand and remember you.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Is my data private and secure?</h3>
          <p class="faq-answer">Absolutely. All conversations are end-to-end encrypted and stored securely. We never share your personal data or conversations with third parties. Your interactions with companions remain completely private and confidential.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Can I share companions with others?</h3>
          <p class="faq-answer">Yes! You can make your custom companions public for others to discover and chat with, or keep them private for personal use. Public companions help build our diverse community while maintaining your conversation privacy.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Can I import memories from ChatGPT?</h3>
          <p class="faq-answer">Yes! Registered users can import their ChatGPT conversation memories to give their AI companions instant context about their preferences, goals, and personality. This creates more personalized conversations from the start.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What emotional intelligence do companions have?</h3>
          <p class="faq-answer">Our companions are designed with advanced emotional intelligence. They can recognize emotional cues, respond empathetically, remember your moods and preferences, and adapt their communication style to provide supportive and meaningful interactions.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How do I start chatting with a companion?</h3>
          <p class="faq-answer">Simply browse our companion gallery, click on any companion that interests you, and start typing. Your companion will respond immediately with their unique personality. No setup required - just start chatting naturally!</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Can companions learn and evolve?</h3>
          <p class="faq-answer">Yes! Companions evolve through your interactions. They learn your communication preferences, remember shared experiences, and adapt their responses based on your relationship history, creating increasingly personalized conversations over time.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What devices are supported?</h3>
          <p class="faq-answer">Narrin AI works seamlessly on all modern web browsers across desktop, tablet, and mobile devices. No app download required - just visit our website and start chatting with your companions from any device.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How realistic are companion interactions?</h3>
          <p class="faq-answer">Our companions provide highly realistic interactions through advanced language models, personality consistency, emotional intelligence, and memory systems. Many users report forming genuine connections with their AI companions.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What kind of companions can I create?</h3>
          <p class="faq-answer">The possibilities are endless! Create mentors, friends, creative partners, language tutors, fictional characters, historical figures, or completely original personalities. Our system supports any companion type you can imagine.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How is companion memory different from regular chatbots?</h3>
          <p class="faq-answer">Unlike standard chatbots, our companions have persistent memory that spans all conversations. They remember your name, preferences, past discussions, and shared experiences, creating a continuous relationship rather than isolated chats.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">Can I have multiple companions?</h3>
          <p class="faq-answer">Absolutely! You can chat with unlimited companions from our gallery and create multiple custom companions. Each maintains their own unique personality and separate memory of your interactions.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">What languages do companions support?</h3>
          <p class="faq-answer">Our companions can communicate in multiple languages and can even help you practice language learning. They adapt to your preferred language while maintaining their unique personality traits.</p>
        </div>
        
        <div class="faq-item">
          <h3 class="faq-question">How do I report issues or get support?</h3>
          <p class="faq-answer">Use the contact form above for any issues or questions. Premium subscribers receive priority support with faster response times. We're committed to ensuring you have the best experience with your AI companions.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-links">
        <a href="/" class="footer-link">Home</a>
        <span class="footer-separator">•</span>
        <a href="/chat-overview" class="footer-link">My Companions</a>
        <span class="footer-separator">•</span>
        <a href="/create-character" class="footer-link">Create Companion</a>
        <span class="footer-separator">•</span>
        <a href="/contact" class="footer-link">Contact</a>
        <span class="footer-separator">•</span>
        <a href="/profile" class="footer-link">Profile</a>
        <span class="footer-separator">•</span>
        <a href="/privacy-policy" class="footer-link">Privacy Policy</a>
        <span class="footer-separator">•</span>
        <a href="/terms-and-conditions" class="footer-link">Terms and Conditions</a>
      </div>
      <div class="footer-copyright">
        © 2025 Narrin AI. All rights reserved.
      </div>
    </div>
  </footer>

  <script>
    // ===== MOBILE MENU FUNCTIONALITY =====
    function toggleMobileMenu() {
      const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      
      if (!mobileMenuOverlay || !mobileMenuBtn) return;
      
      const isActive = mobileMenuOverlay.classList.contains('active');
      
      if (isActive) {
        closeMobileMenu();
      } else {
        openMobileMenu();
      }
    }

    function openMobileMenu() {
      const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      
      if (mobileMenuOverlay) {
        mobileMenuOverlay.classList.add('active');
      }
      if (mobileMenuBtn) {
        mobileMenuBtn.classList.add('active');
        mobileMenuBtn.setAttribute('aria-expanded', 'true');
      }
      document.body.style.overflow = 'hidden';
    }

    function closeMobileMenu() {
      const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      
      if (mobileMenuOverlay) {
        mobileMenuOverlay.classList.remove('active');
      }
      if (mobileMenuBtn) {
        mobileMenuBtn.classList.remove('active');
        mobileMenuBtn.setAttribute('aria-expanded', 'false');
      }
      document.body.style.overflow = '';
    }

    // ===== AUTHENTICATION CHECK =====
    function initializeAuthenticationCheck() {
      console.log('🔐 Initializing authentication check...');
      
      // Check localStorage first
      const token = localStorage.getItem('user_token');
      const email = localStorage.getItem('user_email');
      const uid = localStorage.getItem('user_uid');
      const timestamp = localStorage.getItem('user_auth_timestamp');
      
      if (token && email && uid && token !== 'false' && token !== 'null') {
        // Check if token is not too old (24 hours)
        const authAge = Date.now() - parseInt(timestamp || '0');
        if (authAge < 24 * 60 * 60 * 1000) {
          console.log('✅ Valid authentication found in localStorage:', email);
          
          // Set global auth state
          window.isAuthenticated = true;
          window.currentUser = { email, uid, token };
          
          // Update UI
          updateLoginButton();
          
          return true;
        } else {
          console.log('⏰ Authentication expired, clearing...');
          clearAuthData();
        }
      }
      
      // Fallback: Check Netlify Identity
      if (window.netlifyIdentity) {
        const netlifyUser = window.netlifyIdentity.currentUser();
        if (netlifyUser) {
          console.log('✅ Found Netlify Identity user:', netlifyUser.email);
          
          // Restore localStorage from Netlify
          handleLoginSuccess(netlifyUser, 'recovery');
          return true;
        }
      }
      
      console.log('❌ No valid authentication found');
      window.isAuthenticated = false;
      window.currentUser = null;
      updateLoginButton();
      return false;
    }

    // Clear authentication data
    function clearAuthData() {
      localStorage.removeItem('user_email');
      localStorage.removeItem('user_token');
      localStorage.removeItem('user_uid');
      localStorage.removeItem('user_auth_timestamp');
      localStorage.removeItem('user_refresh_token');
      localStorage.removeItem('user_netlify_data');
      
      window.isAuthenticated = false;
      window.currentUser = null;
    }

    // Handle login success and store auth data
    function handleLoginSuccess(user, source = 'login') {
      console.log(`✅ handleLoginSuccess called for: ${user.email} (${source})`);
      
      // Store authentication data in localStorage
      localStorage.setItem('user_email', user.email);
      localStorage.setItem('user_token', user.token?.access_token || 'true');
      localStorage.setItem('user_uid', user.id);
      localStorage.setItem('user_auth_timestamp', Date.now().toString());
      localStorage.setItem('user_netlify_data', JSON.stringify(user));
      
      // Set global auth state
      window.isAuthenticated = true;
      window.currentUser = { email: user.email, uid: user.id, token: user.token?.access_token };
      
      // Update UI
      updateLoginButton();
    }

    // ===== NETLIFY IDENTITY =====
    function updateLoginButton() {
      const loginBtn = document.getElementById('loginBtn');
      const mobileLoginBtn = document.getElementById('mobileLoginBtn');
      
      // Check both Netlify Identity and local storage for user info
      const netlifyUser = window.netlifyIdentity && window.netlifyIdentity.currentUser();
      const localEmail = localStorage.getItem("user_email");
      const localToken = localStorage.getItem("user_token");
      const isAnonymousUser = localStorage.getItem('is_anonymous_user') === 'true';
      const isAnonymousEmail = localEmail === 'anonymous@narrin.ai';
      
      // Only consider truly authenticated users (not anonymous)
      const isLoggedIn = netlifyUser || (localEmail && localToken && !isAnonymousUser && !isAnonymousEmail);
      
      if (isLoggedIn) {
        // Always show "Profile" for logged in users instead of their name
        if (loginBtn) {
          loginBtn.textContent = 'Profile';
          loginBtn.href = '/profile';
        }
        if (mobileLoginBtn) {
          const icon = mobileLoginBtn.querySelector('.mobile-menu-link-icon');
          mobileLoginBtn.innerHTML = `${icon ? icon.outerHTML : '<span class="mobile-menu-link-icon">👤</span>'}Profile`;
          mobileLoginBtn.href = "/profile";
        }
      } else {
        if (loginBtn) {
          loginBtn.textContent = 'Login/Register';
          loginBtn.href = '#';
          loginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            if (window.netlifyIdentity) {
              window.netlifyIdentity.open();
            }
          });
        }
        if (mobileLoginBtn) {
          const icon = mobileLoginBtn.querySelector('.mobile-menu-link-icon');
          mobileLoginBtn.innerHTML = `${icon ? icon.outerHTML : '<span class="mobile-menu-link-icon">👤</span>'}Login/Register`;
          mobileLoginBtn.href = '#';
          mobileLoginBtn.addEventListener('click', (e) => {
            e.preventDefault();
            if (window.netlifyIdentity) {
              window.netlifyIdentity.open();
            }
          });
        }
      }
    }

    // ===== SEARCH FUNCTIONALITY =====
    function handleSearch(searchTerm) {
      if (!searchTerm || !searchTerm.trim()) {
        console.log('Empty search term, ignoring');
        return;
      }
      
      const trimmedTerm = searchTerm.trim();
      console.log('Redirecting to search results for:', trimmedTerm);
      window.location.href = `search-results.html?q=${encodeURIComponent(trimmedTerm)}`;
    }

    // Desktop search
    document.querySelector('.search-form')?.addEventListener('submit', (e) => {
      e.preventDefault();
      const searchInput = e.target.querySelector('.nav-search-input');
      handleSearch(searchInput.value);
    });

    // Mobile search
    document.querySelector('.mobile-search-form')?.addEventListener('submit', (e) => {
      e.preventDefault();
      const searchInput = e.target.querySelector('.mobile-search-input');
      handleSearch(searchInput.value);
    });

    // Mobile search button toggle
    function toggleMobileSearch() {
      const mobileSearchOverlay = document.querySelector('.mobile-search-overlay');
      const mobileSearchBtn = document.querySelector('.mobile-search-btn');
      
      if (!mobileSearchOverlay || !mobileSearchBtn) return;
      
      const isActive = mobileSearchOverlay.classList.contains('active');
      
      if (isActive) {
        closeMobileSearch();
      } else {
        openMobileSearch();
      }
    }

    function openMobileSearch() {
      const mobileSearchOverlay = document.querySelector('.mobile-search-overlay');
      const mobileSearchBtn = document.querySelector('.mobile-search-btn');
      const mobileSearchInput = document.querySelector('.mobile-search-input');
      
      if (mobileSearchOverlay) {
        mobileSearchOverlay.classList.add('active');
      }
      if (mobileSearchBtn) {
        mobileSearchBtn.setAttribute('aria-expanded', 'true');
      }
      if (mobileSearchInput) {
        setTimeout(() => mobileSearchInput.focus(), 100);
      }
    }

    function closeMobileSearch() {
      const mobileSearchOverlay = document.querySelector('.mobile-search-overlay');
      const mobileSearchBtn = document.querySelector('.mobile-search-btn');
      
      if (mobileSearchOverlay) {
        mobileSearchOverlay.classList.remove('active');
      }
      if (mobileSearchBtn) {
        mobileSearchBtn.setAttribute('aria-expanded', 'false');
      }
    }

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🚀 Initializing Contact page...');
      
      // Initialize authentication check first
      initializeAuthenticationCheck();
      
      // Mobile menu event listeners
      const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
      mobileMenuBtn?.addEventListener('click', toggleMobileMenu);

      // Mobile search event listeners
      const mobileSearchBtn = document.querySelector('.mobile-search-btn');
      mobileSearchBtn?.addEventListener('click', toggleMobileSearch);

      const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
      mobileMenuOverlay?.addEventListener('click', (e) => {
        if (e.target === mobileMenuOverlay) {
          closeMobileMenu();
        }
      });

      document.querySelectorAll('.mobile-menu-link').forEach(link => {
        link.addEventListener('click', closeMobileMenu);
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          if (mobileMenuOverlay?.classList.contains('active')) {
            closeMobileMenu();
          }
          const mobileSearchOverlay = document.querySelector('.mobile-search-overlay');
          if (mobileSearchOverlay?.classList.contains('active')) {
            closeMobileSearch();
          }
        }
      });

      // Check for referral parameter
      const urlParams = new URLSearchParams(window.location.search);
      const referralCode = urlParams.get('ref');
      if (referralCode) {
        localStorage.setItem('referralCode', referralCode);
        console.log('📌 Referral code saved:', referralCode);
        // Clean URL
        const cleanUrl = window.location.pathname;
        window.history.replaceState({}, document.title, cleanUrl);
      }
      
      console.log('✅ Contact page initialization complete');
    });

    // FIRST: Check for referral code before anything else
    const urlParams = new URLSearchParams(window.location.search);
    const referralCode = urlParams.get('ref');
    if (referralCode) {
      localStorage.setItem('referralCode', referralCode);
      console.log('📌 Referral code saved BEFORE Identity init:', referralCode);
    }
    
    // Initialize Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.init({
        namePlaceholder: 'Nickname'
      });
      
      window.netlifyIdentity.on('init', updateLoginButton);
      
      window.netlifyIdentity.on('login', (user) => {
        handleLoginSuccess(user, 'login');
        window.netlifyIdentity.close();
        
        // Ensure redirect to profile
        setTimeout(() => {
          window.location.href = '/profile';
        }, 500);
      });
      
      window.netlifyIdentity.on('logout', () => {
        clearAuthData();
        updateLoginButton();
      });
    }
  </script>
</body>
</html>
